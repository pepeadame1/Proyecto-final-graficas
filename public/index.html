<!DOCTYPE html>
<html>
    <head>
        <title>half-life-recreation</title>
        
        <script src="threejs-files/three.js"></script>
        <script src="threejs-files/OBJLoader.js"></script>
        <script src="threejs-files/MTLLoader.js"></script>
        <script src="threejs-files/OrbitControls.js"></script>
        <script src="threejs-files/GLTFLoader.js"></script>
        
    </head>
    <body>
        <script>
        
            const scene = new THREE.Scene();
            const light = new THREE.DirectionalLight('#ffffff',0.9);
            light.position.set(-20,0,100);
            var light2 = new THREE.AmbientLight(0x404040, 5);
            scene.add(light2);
            scene.add(light);
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight,0.1,1000);
            camera.position.y = 2;
            camera.position.z = 0;
            
            
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth,window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const objLoader = new THREE.OBJLoader();
            objLoader.setPath('/blender-files/');

            const mtlLoader = new THREE.MTLLoader();
            mtlLoader.setPath('/blender-files/');

            const gltfLoader = new THREE.GLTFLoader();
            gltfLoader.setPath('/blender-files/');
            
            const controls = new THREE.OrbitControls(camera,renderer.domElement);
            controls.update();
            /*
            new Promise((resolve) => {
                mtlLoader.load('proyecto-half-life.mtl',(materials)=>{
                    resolve(materials);
                })
            })
            .then((materials)=>{
                materials.preload();
                objLoader.setMaterials(materials);
                objLoader.load('proyecto-half-life.obj',(object) =>{
                    // scene.add(object);
                })
            })
            */
            const material = new THREE.MeshBasicMaterial( {color: 0x00ff00} );
            //b1 - es la pared de atras, la mas cerca a la computadora
            const b1Geometry = new THREE.BoxGeometry( 4, 3, .4);
            const b1Texture = new THREE.TextureLoader().load('blender-files/textures/half-life-wall-3.jpg');
            const b1Material = new THREE.MeshBasicMaterial( {map: b1Texture} );
            const b1 = new THREE.Mesh( b1Geometry, b1Material );
            b1.position.z = -2.2;
            b1.position.y = 1.5;
            scene.add( b1 );
            //b2 - es la pared que tiene las pantallas (solo la pared, no las pantallas)
            const b2Geometry = new THREE.BoxGeometry(.4,3,4);
            const b2Texture = new THREE.TextureLoader().load('blender-files/textures/half-life-wall2.jpg');
            const b2Material = new THREE.MeshBasicMaterial( {map: b2Texture} );
            const b2 = new THREE.Mesh(b2Geometry,b2Material);
            scene.add(b2);
            b2.position.x = -2.2;
            b2.position.y = 1.5;
            //b3 - es el suelo
            const b3Geometry = new THREE.BoxGeometry(8,.4,8);
            const b3Texture = new THREE.TextureLoader().load('blender-files/textures/large_square_pattern_01_disp_2k.png');
            b3Texture.wrapS = THREE.RepeatWrapping;
            b3Texture.wrapT = THREE.RepeatWrapping;
            b3Texture.repeat.set(5,5);
            
            const b3Material = new THREE.MeshBasicMaterial( {map: b3Texture} );
            const b3 = new THREE.Mesh(b3Geometry,b3Material);
            b3.position.y = -0.2;
            scene.add(b3);
            //b4 - la pared de computadoras
            const b4Geometry = new THREE.BoxGeometry(.4,1.13,3);
            const b4Texture = new THREE.TextureLoader().load('blender-files/textures/computers-half-life.png');
            const b4Material = new THREE.MeshBasicMaterial( {map: b4Texture} );
            const b4 = new THREE.Mesh(b4Geometry,b4Material);
            b4.position.x = -2.1028;
            b4.position.y = 1.84956;
            scene.add(b4);
            //b5 - es el pilar de la esquina de la entrada
            const b5Geometry = new THREE.BoxGeometry(1.2,3,.5);
            const b5Texture = new THREE.TextureLoader().load('blender-files/textures/half-life-wall2.jpg');
            // b5Texture.wrapS = THREE.RepeatWrapping;
            // b5Texture.wrapT = THREE.RepeatWrapping;
            // b5Texture.offset.x -= .1;
            b5Texture.repeat.set(0.2,1);
            const b5Material = new THREE.MeshBasicMaterial( {map: b5Texture} );
            const b5 = new THREE.Mesh(b5Geometry,b5Material);
            b5.position.y = 1.5;
            b5.position.x = -1.4;
            b5.position.z = 2.2;
            scene.add(b5);
            //b6 - una de las paredes de la esquina
            const b6Geometry = new THREE.BoxGeometry(2,4,.4);
            const b6Texture = new THREE.TextureLoader().load('blender-files/textures/half-life-wall2.jpg');
            b6Texture.wrapS = THREE.RepeatWrapping;
            b6Texture.wrapT = THREE.RepeatWrapping;
            b6Texture.repeat.set(.2,1);
            b6Texture.offset.y += .8;
            const b6Material = new THREE.MeshBasicMaterial( {map: b6Texture} );
            const b6 = new THREE.Mesh(b6Geometry,b6Material);
            b6.position.x = 3.4;
            b6.position.y = 1;
            b6.position.z = 0.2;
            scene.add(b6);
            //b7 - es la pared larga de el corredor
            const b7Geometry = new THREE.BoxGeometry(.4,2,4);
            const b7Texture = new THREE.TextureLoader().load('blender-files/textures/half-life-wall.jpg');
            const b7Material = new THREE.MeshBasicMaterial( {map: b7Texture} );
            const b7 = new THREE.Mesh(b7Geometry,b7Material);
            b7.position.x = 3.4;
            b7.position.y = 1;
            b7.position.z = -2;
            scene.add(b7);
            //b8 - es la puerta
            const b8Geometry = new THREE.BoxGeometry(1.6,1.6,.2);
            const b8Texture = new THREE.TextureLoader().load('blender-files/textures/door-half-life.png');
            const b8Material = new THREE.MeshBasicMaterial( {map: b8Texture} );
            b8 = new THREE.Mesh(b8Geometry,b8Material);
            b8.position.x = 0;
            b8.position.y = .8;
            b8.position.z = 2.5;
            scene.add(b8);
           
           gltfLoader.load('proyecto-half-life2.glb',function(object){
                scene.add(object.scene);
           });
           
            function render(){
                requestAnimationFrame(render);
                controls.update();
                renderer.render(scene,camera);

            }
            
            render();
        </script>
    </body>
</html>